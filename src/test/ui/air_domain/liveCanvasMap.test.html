<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="utf-8">
    <title>Air Domain Controls Test</title>

    <link rel="stylesheet" href="../../../main/ui/vendor/bower/leaflet-dist/leaflet.css">
    <link rel="stylesheet" href="../../../../target/stealth/css/style.css">

    <script type="text/javascript" src="../../../main/ui/vendor/bower/leaflet-dist/leaflet.js"></script>
    <script type="text/javascript" src="../../../main/ui/vendor/bower/angular/angular.js"></script>
    <script type="text/javascript" src="../../../main/ui/vendor/bower/lodash/dist/lodash.js"></script>
<!--    <script type="text/javascript" src="../../../main/ui/vendor/bower/openlayers/lib/OpenLayers.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/vendor/bower/jquery/dist/jquery.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/vendor/bower/angular-md5/angular-md5.js"></script>-->

<!--    <script type="text/javascript" src="../../../main/ui/src/app/ows/OpenLayers/Format/WFSCapabilities/v1_1_0_custom.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/ows/ows.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/ows/airTrackHistory.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/control/airTrackInfoControl.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/control/airTrackerLayersControl.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/control/playbackControl.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/map/leaflet/utils.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/map/leaflet/trackCanvas.js"></script>-->
    <script type="text/javascript" src="../../../main/ui/src/app/common/map/leaflet/map.js"></script>
    <script type="text/javascript" src="../../../main/ui/src/app/common/map/leaflet/canvas.js"></script>
    <script type="text/javascript" src="../../../main/ui/src/app/common/map/leaflet/L.CanvasOverlay.js"></script>
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/filters.js"></script>-->
<!--    <script type="text/javascript" src="../../../main/ui/src/app/common/trackData.js"></script>-->
</head>
<body>
    <div ng-app="liveCanvasMapTest">
        <tracker-controls-test>
            <leaflet-map id="testMap"></leaflet-map>
        </tracker-controls-test>
    </div>

        <script type="text/javascript">

            angular.module('liveCanvasMapTest', [
                'stealth.common.map.leaflet.map'
            ])

                .config(['$provide', function ($provide) {
                    var proxyUrl = "http://localhost:9900/geoserver";
                    var config = {
                        geoserver: {
                            defaultUrl: proxyUrl,
                            omitProxy: true
                        },
                        map: {
                            url: proxyUrl + "/wms",
                            baseLayers: "mapproxy:globe.osm.toner",
                            format: "image/png",
                            lon: "51.505",
                            lat: "-0.09",
                            zoom: "9",
                            maxZoom: "18"
                        },
                        airTracker: {
                            data: {
                                layer: "whiptail:fr",
                                threadingKey: "hexid"
                            }
                        },
                        trackStyles: [
                            {
                                contributor: "ADSB",
                                labelName: "Radar 24",
                                color: "#ff7800",
                                weight: 8,
                                opacity: 1.0,
                                numSegments: 8
                            },
                            {
                                contributor: "Other",
                                labelName: "Other",
                                color: "#000000",
                                weight: 3,
                                opacity: 1.0,
                                numSegments: 5
                            }
                        ]
                    };
                    $provide.constant('CONFIG', config);
                }])

                .directive('trackerControlsTest', [
                    '$rootScope', 'CONFIG',
                    function ($rootScope, CONFIG) {
                        return {
                            restrict: 'E',
                            replace: true,
                            transclude: true,
                            template: '<div ng-transclude></div>',
                            link: function (scope, element, attrs) {
                                console.log('(liveCanvasMapTest) Starting Test');

                                setInterval(function () {
                                    $rootScope.$broadcast('redraw canvas', []);
                                }, 10);
                            }//END of link function
                        };
                    }
                ])
            ;

        </script>
    </div>

</body>
</html>
