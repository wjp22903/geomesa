<!-- TODO: Add minimize/maximize buttons -->
<!-- TODO: Add a lock button that locks in user-specified values for dtg.min and dtg.max, -->
<!-- TODO: instead of letting the data store time ranges define the overall time range. -->
<div ng-controller="timeLapseControlsController" ng-show="display.toggledOn" class="timeLapseControlsPanel glass anchorRight anchorBottom">
    <div id="col0" class="cell">
        <div id="col0Table" class="cellTable">
            <div class="cellTableRow">
                <div class="innerField center">
                    <button type="button" ng-click="display.togglePlay()">
                        <i class="fa fa-play" ng-show="display.isPaused"></i>
                        <i class="fa fa-pause" ng-show="display.isPlaying"></i>
                    </button>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField rightJustify">Duration:</div>
            </div>
            <div class="cellTableRow">
                <div class="innerField rightJustify">Window:</div>
            </div>
            <div class="cellTableRow">
                <div class="innerField rightJustify">Step:</div>
            </div>
        </div>
    </div>
    <div id="col1" class="cell">
        <div id="col1Table" class="cellTable">
            <div class="cellTableRow">
                <div class="innerField rightJustify" style="color:rgba(0,0,0,0);text-shadow:none">M</div>
            </div>
            <div class="cellTableRow">
                <!-- TODO: Make this user editable -->
                <div class="innerField rightJustify">
                    <span class="displayShadow glass">{{displayInUtc(dtg.min * 1000)}}</span>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField rightJustify">
                    <span class="displayShadow glass">{{window.millis | millisToDHMS}}</span>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField rightJustify">
                    <span class="displayShadow glass">{{step.millis | millisToDHMS}}</span>
                </div>
            </div>
        </div>
    </div>
    <div id="col2" class="cell">
        <div id="col2Table" class="cellTable">
            <div class="cellTableRow">
                <div class="innerField">
                    <span class="displayShadow glass">{{displayInUtc(dtg.millis)}}</span>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField">
                    <st-time-lapse-slider model="dtg" emit="timelapse:dtgChanged"></st-time-lapse-slider>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField">
                    <st-time-lapse-slider model="window" emit="timelapse:windowChanged"></st-time-lapse-slider>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField">
                    <st-time-lapse-slider model="step" emit="timelapse:stepChanged"></st-time-lapse-slider>
                </div>
            </div>
        </div>
    </div>
    <div id="col3" class="cell">
        <div id="col3Table" class="cellTable">
            <div class="cellTableRow">
                <div class="innerField" style="color:rgba(0,0,0,0);text-shadow:none">M</div>
            </div>
            <div class="cellTableRow">
                <!-- TODO: Make this user editable -->
                <div class="innerField">
                    <span class="displayShadow glass">{{displayInUtc(dtg.max * 1000)}}</span>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField">
                    <input type="number" class="glass" ng-model="window.max" ng-change="window.changed()">
                    <select ng-model="window.unit" ng-options="u for u in units" ng-change="window.changed()"></select>
                </div>
            </div>
            <div class="cellTableRow">
                <div class="innerField">
                    <input type="number" class="glass" ng-model="step.max" ng-change="step.changed()">
                    <select ng-model="step.unit" ng-options="u for u in units" ng-change="step.changed()"></select>
                </div>
            </div>
        </div>
    </div>
</div>
