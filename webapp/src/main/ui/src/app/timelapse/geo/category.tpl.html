<div style="max-height:300px;overflow:auto;">
    <div ng-hide="workspaces.live | isEmpty" class="categoryGrouping">
        <div style="width:20px;text-align:center;display:inline-block;">
            <input type="radio" ng-model="timelapse.mode" name="mode" value="live">
        </div>
        <b>Live</b>
        <span class="btn btn-default btn-xs catGroupButton"
              ng-click="launchLiveQueryWizard()">
            <i class="fa fa-fw fa-plus text-primary"></i>
        </span>
        <div ng-repeat="layer in workspaces.live" class="categoryGrouping categoryIndent">
            <input type="checkbox" ng-model="layer.categoryViewState.toggledOn" ng-change="toggleLiveLayer(layer)">
            <i>{{::layer.Title}}</i>
        </div>
    </div>
    <div class="categoryGrouping">
        <div style="width:20px;text-align:center;display:inline-block;">
            <input type="radio" ng-model="timelapse.mode" name="mode" value="historical">
        </div>
        <b>Historical</b>
        <span class="btn btn-default btn-xs catGroupButton"
              ng-click="launchHistoricalQueryWizard()"
              tooltip-html-unsafe="<span style='white-space:nowrap'>Add layer</span>"
              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"
              tooltip-trigger="mouseenter" style="margin-right:2px">
            <i class="fa fa-fw fa-plus text-primary"></i>
        </span>
        <span class="btn btn-default btn-xs catGroupButton"
              ng-click="uploadFile()"
              tooltip-html-unsafe="<span style='white-space:nowrap'>Load file</span>"
              tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"
              tooltip-trigger="mouseenter" style="margin-left:2px">
            <i class="fa fa-fw fa-folder-open text-primary"></i>
        </span>
        <div style="height:0px;width:0px;overflow:hidden">
            <input id="upfile" type="file"
                   onchange="angular.element(this).scope().fileSelected(this)">
        </div>
        <div ng-repeat="store in historicalLayer.getStores()" class="categoryGrouping categoryIndent">
            <div id="col0" class="categoryCell">
                <div ng-if="store.getCategoryViewState().isDataPending() && !store.getCategoryViewState().isError">
                    <i class="fa fa-circle-o-notch fa-spin"></i>
                </div>
                <div ng-if="store.getCategoryViewState().isError" class="errorIconWrapper">
                    <i class="fa fa-warning text-danger"
                       tooltip-html-unsafe="<span style='white-space:nowrap;background-color:#a94442;color:white'>{{store.getCategoryViewState().errorMsg}}</span>"
                       tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"
                       tooltip-trigger="mouseenter">
                    </i>
                </div>
                <div ng-if="store.getCategoryViewState().isDataReady()"
                     style="width:16px;height:16px;display:inline-block;border:1px solid #ddd;border-radius:5px;vertical-align:text-bottom;"
                     ng-style="{'background-color': store.getFillColorHexString()}">
                </div>
            </div>
            <div id="col1" class="categoryCell">
                <input type="checkbox" style="width:16px;height:16px"
                    ng-if="!store.getCategoryViewState().isDataPending() && !store.getCategoryViewState().isError"
                    ng-model="store.getCategoryViewState().toggledOn"
                    ng-change="historicalChanged()"
                    tooltip-html-unsafe="<span style='white-space:nowrap'>Toggle visibility</span>"
                    tooltip-placement="right" tooltip-animation="false" tooltip-popup-delay="500"
                    tooltip-trigger="mouseenter"
                    style="vertical-align:top;">
            </div>
            <div id="col2" class="categoryCell">
                {{store.getName()}}
            </div>
            <div id="col3" class="categoryCell" style="width:100%;text-align:right">
                <span class="btn btn-default catGroupButton"
                      ng-if="store.getCategoryViewState().isDataReady() || store.getCategoryViewState().isError"
                      ng-click="removeHistorical(store)">
                    <i class="fa fa-fw fa-remove text-danger"></i>
                </span>
            </div>
        </div>
    </div>
    <div ng-hide="workspaces.summary | isEmpty" class="categoryGrouping">
        <input type="checkbox" ng-model="timelapse.summaryOn"
               bs-switch switch-size="micro" switch-label-width="0">
        <b>Summary</b>
        <span class="btn btn-default btn-xs catGroupButton"
              ng-click="launchSummaryQueryWizard()">
            <i class="fa fa-fw fa-plus text-primary"></i>
        </span>
    </div>
</div>
